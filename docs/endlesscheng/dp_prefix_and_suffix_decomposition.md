---
comments: True
---

# DP Prefix and Suffix Decomposition

- [ ] [724. Find Pivot Index](https://leetcode.cn/problems/find-pivot-index/) (Easy)
- [ ] [1991. Find the Middle Index in Array](https://leetcode.cn/problems/find-the-middle-index-in-array/) (Easy)
- [ ] [2270. Number of Ways to Split Array](https://leetcode.cn/problems/number-of-ways-to-split-array/) (Medium)
- [ ] [2256. Minimum Average Difference](https://leetcode.cn/problems/minimum-average-difference/) (Medium)
- [ ] [1422. Maximum Score After Splitting a String](https://leetcode.cn/problems/maximum-score-after-splitting-a-string/) (Easy)
- [x] [1493. Longest Subarray of 1's After Deleting One Element](https://leetcode.cn/problems/longest-subarray-of-1s-after-deleting-one-element/) (Medium)
- [x] [845. Longest Mountain in Array](https://leetcode.cn/problems/longest-mountain-in-array/) (Medium)
- [x] [2012. Sum of Beauty in the Array](https://leetcode.cn/problems/sum-of-beauty-in-the-array/) (Medium)
- [ ] [2909. Minimum Sum of Mountain Triplets II](https://leetcode.cn/problems/minimum-sum-of-mountain-triplets-ii/) (Medium)
- [ ] [2483. Minimum Penalty for a Shop](https://leetcode.cn/problems/minimum-penalty-for-a-shop/) (Medium)
- [ ] [1525. Number of Good Ways to Split a String](https://leetcode.cn/problems/number-of-good-ways-to-split-a-string/) (Medium)
- [ ] [3354. Make Array Elements Equal to Zero](https://leetcode.cn/problems/make-array-elements-equal-to-zero/) (Easy)
- [ ] [2874. Maximum Value of an Ordered Triplet II](https://leetcode.cn/problems/maximum-value-of-an-ordered-triplet-ii/) (Medium)
- [x] [123. Best Time to Buy and Sell Stock III](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/) (Hard)
- [ ] [2222. Number of Ways to Select Buildings](https://leetcode.cn/problems/number-of-ways-to-select-buildings/) (Medium)
- [ ] [1031. Maximum Sum of Two Non-Overlapping Subarrays](https://leetcode.cn/problems/maximum-sum-of-two-non-overlapping-subarrays/) (Medium)
- [ ] [689. Maximum Sum of 3 Non-Overlapping Subarrays](https://leetcode.cn/problems/maximum-sum-of-3-non-overlapping-subarrays/) (Hard)
- [ ] [2420. Find All Good Indices](https://leetcode.cn/problems/find-all-good-indices/) (Medium)
- [ ] [2100. Find Good Days to Rob the Bank](https://leetcode.cn/problems/find-good-days-to-rob-the-bank/) (Medium)
- [ ] [926. Flip String to Monotone Increasing](https://leetcode.cn/problems/flip-string-to-monotone-increasing/) (Medium)
- [ ] [334. Increasing Triplet Subsequence](https://leetcode.cn/problems/increasing-triplet-subsequence/) (Medium)
- [ ] [2712. Minimum Cost to Make All Characters Equal](https://leetcode.cn/problems/minimum-cost-to-make-all-characters-equal/) (Medium)
- [ ] [1653. Minimum Deletions to Make String Balanced](https://leetcode.cn/problems/minimum-deletions-to-make-string-balanced/) (Medium)
- [x] [1186. Maximum Subarray Sum with One Deletion](https://leetcode.cn/problems/maximum-subarray-sum-with-one-deletion/) (Medium)
- [x] [42. Trapping Rain Water](https://leetcode.cn/problems/trapping-rain-water/) (Hard)
- [ ] [2711. Difference of Number of Distinct Values on Diagonals](https://leetcode.cn/problems/difference-of-number-of-distinct-values-on-diagonals/) (Medium)
- [ ] [1477. Find Two Non-overlapping Sub-arrays Each With Target Sum](https://leetcode.cn/problems/find-two-non-overlapping-sub-arrays-each-with-target-sum/) (Medium)
- [ ] [2680. Maximum OR](https://leetcode.cn/problems/maximum-or/) (Medium)
- [x] [1671. Minimum Number of Removals to Make Mountain Array](https://leetcode.cn/problems/minimum-number-of-removals-to-make-mountain-array/) (Hard)
- [ ] [1888. Minimum Number of Flips to Make the Binary String Alternating](https://leetcode.cn/problems/minimum-number-of-flips-to-make-the-binary-string-alternating/) (Medium)
- [x] [238. Product of Array Except Self](https://leetcode.cn/problems/product-of-array-except-self/) (Medium)
- [ ] [2906. Construct Product Matrix](https://leetcode.cn/problems/construct-product-matrix/) (Medium)
- [ ] [3334. Find the Maximum Factor Score of Array](https://leetcode.cn/problems/find-the-maximum-factor-score-of-array/) (Medium)
- [ ] [2167. Minimum Time to Remove All Cars Containing Illegal Goods](https://leetcode.cn/problems/minimum-time-to-remove-all-cars-containing-illegal-goods/) (Hard)
- [ ] [2484. Count Palindromic Subsequences](https://leetcode.cn/problems/count-palindromic-subsequences/) (Hard)
- [ ] [2163. Minimum Difference in Sums After Removal of Elements](https://leetcode.cn/problems/minimum-difference-in-sums-after-removal-of-elements/) (Hard)
- [ ] [2565. Subsequence With the Minimum Score](https://leetcode.cn/problems/subsequence-with-the-minimum-score/) (Hard)
- [ ] [1995. Count Special Quadruplets](https://leetcode.cn/problems/count-special-quadruplets/) (Easy)
- [x] [2552. Count Increasing Quadruplets](https://leetcode.cn/problems/count-increasing-quadruplets/) (Hard)
- [ ] [3302. Find the Lexicographically Smallest Valid Sequence](https://leetcode.cn/problems/find-the-lexicographically-smallest-valid-sequence/) (Medium)
- [ ] [3404. Count Special Subsequences](https://leetcode.cn/problems/count-special-subsequences/) (Medium)
- [ ] [3303. Find the Occurrence of First Almost Equal Substring](https://leetcode.cn/problems/find-the-occurrence-of-first-almost-equal-substring/) (Hard)
- [ ] [3287. Find the Maximum Sequence Value of Array](https://leetcode.cn/problems/find-the-maximum-sequence-value-of-array/) (Hard)
- [ ] [3257. Maximum Value Sum by Placing Three Rooks II](https://leetcode.cn/problems/maximum-value-sum-by-placing-three-rooks-ii/) (Hard)
- [ ] [3410. Maximize Subarray Sum After Removing All Occurrences of One Element](https://leetcode.cn/problems/maximize-subarray-sum-after-removing-all-occurrences-of-one-element/) (Hard)
- [ ] [3003. Maximize the Number of Partitions After Operations](https://leetcode.cn/problems/maximize-the-number-of-partitions-after-operations/) (Hard)
- [ ] [487. Max Consecutive Ones II](https://leetcode.cn/problems/max-consecutive-ones-ii/) (Medium) ðŸ‘‘
- [ ] [1746. Maximum Subarray Sum After One Operation](https://leetcode.cn/problems/maximum-subarray-sum-after-one-operation/) (Medium) ðŸ‘‘

## 724. Find Pivot Index

-   [LeetCode](https://leetcode.com/problems/find-pivot-index/) | [LeetCode CH](https://leetcode.cn/problems/find-pivot-index/) (Easy)

-   Tags: array, prefix sum

## 1991. Find the Middle Index in Array

-   [LeetCode](https://leetcode.com/problems/find-the-middle-index-in-array/) | [LeetCode CH](https://leetcode.cn/problems/find-the-middle-index-in-array/) (Easy)

-   Tags: array, prefix sum

## 2270. Number of Ways to Split Array

-   [LeetCode](https://leetcode.com/problems/number-of-ways-to-split-array/) | [LeetCode CH](https://leetcode.cn/problems/number-of-ways-to-split-array/) (Medium)

-   Tags: array, prefix sum

## 2256. Minimum Average Difference

-   [LeetCode](https://leetcode.com/problems/minimum-average-difference/) | [LeetCode CH](https://leetcode.cn/problems/minimum-average-difference/) (Medium)

-   Tags: array, prefix sum

## 1422. Maximum Score After Splitting a String

-   [LeetCode](https://leetcode.com/problems/maximum-score-after-splitting-a-string/) | [LeetCode CH](https://leetcode.cn/problems/maximum-score-after-splitting-a-string/) (Easy)

-   Tags: string, prefix sum

## 1493. Longest Subarray of 1's After Deleting One Element

-   [LeetCode](https://leetcode.com/problems/longest-subarray-of-1s-after-deleting-one-element/) | [LeetCode CH](https://leetcode.cn/problems/longest-subarray-of-1s-after-deleting-one-element/) (Medium)

-   Tags: array, dynamic programming, sliding window

```python title="1493. Longest Subarray of 1's After Deleting One Element - Python Solution"
--8<-- "1493_longest_subarray_of_1s_after_deleting_one_element.py"
```

## 845. Longest Mountain in Array

-   [LeetCode](https://leetcode.com/problems/longest-mountain-in-array/) | [LeetCode CH](https://leetcode.cn/problems/longest-mountain-in-array/) (Medium)

-   Tags: array, two pointers, dynamic programming, enumeration

```python title="845. Longest Mountain in Array - Python Solution"
--8<-- "0845_longest_mountain_in_array.py"
```

## 2012. Sum of Beauty in the Array

-   [LeetCode](https://leetcode.com/problems/sum-of-beauty-in-the-array/) | [LeetCode CH](https://leetcode.cn/problems/sum-of-beauty-in-the-array/) (Medium)

-   Tags: array

```python title="2012. Sum of Beauty in the Array - Python Solution"
--8<-- "2012_sum_of_beauty_in_the_array.py"
```

## 2909. Minimum Sum of Mountain Triplets II

-   [LeetCode](https://leetcode.com/problems/minimum-sum-of-mountain-triplets-ii/) | [LeetCode CH](https://leetcode.cn/problems/minimum-sum-of-mountain-triplets-ii/) (Medium)

-   Tags: array

## 2483. Minimum Penalty for a Shop

-   [LeetCode](https://leetcode.com/problems/minimum-penalty-for-a-shop/) | [LeetCode CH](https://leetcode.cn/problems/minimum-penalty-for-a-shop/) (Medium)

-   Tags: string, prefix sum

## 1525. Number of Good Ways to Split a String

-   [LeetCode](https://leetcode.com/problems/number-of-good-ways-to-split-a-string/) | [LeetCode CH](https://leetcode.cn/problems/number-of-good-ways-to-split-a-string/) (Medium)

-   Tags: hash table, string, dynamic programming, bit manipulation

## 3354. Make Array Elements Equal to Zero

-   [LeetCode](https://leetcode.com/problems/make-array-elements-equal-to-zero/) | [LeetCode CH](https://leetcode.cn/problems/make-array-elements-equal-to-zero/) (Easy)

-   Tags: array, simulation, prefix sum

## 2874. Maximum Value of an Ordered Triplet II

-   [LeetCode](https://leetcode.com/problems/maximum-value-of-an-ordered-triplet-ii/) | [LeetCode CH](https://leetcode.cn/problems/maximum-value-of-an-ordered-triplet-ii/) (Medium)

-   Tags: array

## 123. Best Time to Buy and Sell Stock III

-   [LeetCode](https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/) | [LeetCode CH](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/) (Hard)

-   Tags: array, dynamic programming

```python title="123. Best Time to Buy and Sell Stock III - Python Solution"
--8<-- "0123_best_time_to_buy_and_sell_stock_iii.py"
```

## 2222. Number of Ways to Select Buildings

-   [LeetCode](https://leetcode.com/problems/number-of-ways-to-select-buildings/) | [LeetCode CH](https://leetcode.cn/problems/number-of-ways-to-select-buildings/) (Medium)

-   Tags: string, dynamic programming, prefix sum

## 1031. Maximum Sum of Two Non-Overlapping Subarrays

-   [LeetCode](https://leetcode.com/problems/maximum-sum-of-two-non-overlapping-subarrays/) | [LeetCode CH](https://leetcode.cn/problems/maximum-sum-of-two-non-overlapping-subarrays/) (Medium)

-   Tags: array, dynamic programming, sliding window

## 689. Maximum Sum of 3 Non-Overlapping Subarrays

-   [LeetCode](https://leetcode.com/problems/maximum-sum-of-3-non-overlapping-subarrays/) | [LeetCode CH](https://leetcode.cn/problems/maximum-sum-of-3-non-overlapping-subarrays/) (Hard)

-   Tags: array, dynamic programming

## 2420. Find All Good Indices

-   [LeetCode](https://leetcode.com/problems/find-all-good-indices/) | [LeetCode CH](https://leetcode.cn/problems/find-all-good-indices/) (Medium)

-   Tags: array, dynamic programming, prefix sum

## 2100. Find Good Days to Rob the Bank

-   [LeetCode](https://leetcode.com/problems/find-good-days-to-rob-the-bank/) | [LeetCode CH](https://leetcode.cn/problems/find-good-days-to-rob-the-bank/) (Medium)

-   Tags: array, dynamic programming, prefix sum

## 926. Flip String to Monotone Increasing

-   [LeetCode](https://leetcode.com/problems/flip-string-to-monotone-increasing/) | [LeetCode CH](https://leetcode.cn/problems/flip-string-to-monotone-increasing/) (Medium)

-   Tags: string, dynamic programming

## 334. Increasing Triplet Subsequence

-   [LeetCode](https://leetcode.com/problems/increasing-triplet-subsequence/) | [LeetCode CH](https://leetcode.cn/problems/increasing-triplet-subsequence/) (Medium)

-   Tags: array, greedy

## 2712. Minimum Cost to Make All Characters Equal

-   [LeetCode](https://leetcode.com/problems/minimum-cost-to-make-all-characters-equal/) | [LeetCode CH](https://leetcode.cn/problems/minimum-cost-to-make-all-characters-equal/) (Medium)

-   Tags: string, dynamic programming, greedy

## 1653. Minimum Deletions to Make String Balanced

-   [LeetCode](https://leetcode.com/problems/minimum-deletions-to-make-string-balanced/) | [LeetCode CH](https://leetcode.cn/problems/minimum-deletions-to-make-string-balanced/) (Medium)

-   Tags: string, dynamic programming, stack

## 1186. Maximum Subarray Sum with One Deletion

-   [LeetCode](https://leetcode.com/problems/maximum-subarray-sum-with-one-deletion/) | [LeetCode CH](https://leetcode.cn/problems/maximum-subarray-sum-with-one-deletion/) (Medium)

-   Tags: array, dynamic programming

```python title="1186. Maximum Subarray Sum with One Deletion - Python Solution"
--8<-- "1186_maximum_subarray_sum_with_one_deletion.py"
```

## 42. Trapping Rain Water

-   [LeetCode](https://leetcode.com/problems/trapping-rain-water/) | [LeetCode CH](https://leetcode.cn/problems/trapping-rain-water/) (Hard)

-   Tags: array, two pointers, dynamic programming, stack, monotonic stack
-   ![42](../assets/0042.png)

<iframe width="560" height="315" src="https://www.youtube.com/embed/ZI2z5pq0TqA?si=OEYg01dbmzvmtIwZ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

| Approach   | Time | Space |
| ---------- | ---- | ----- |
| DP         | O(N) | O(N)  |
| Left Right | O(N) | O(1)  |
| Monotonic  | O(N) | O(N)  |

```python title="42. Trapping Rain Water - Python Solution"
--8<-- "0042_trapping_rain_water.py"
```

```cpp title="42. Trapping Rain Water - C++ Solution"
--8<-- "cpp/0042_trapping_rain_water.cc"
```

## 2711. Difference of Number of Distinct Values on Diagonals

-   [LeetCode](https://leetcode.com/problems/difference-of-number-of-distinct-values-on-diagonals/) | [LeetCode CH](https://leetcode.cn/problems/difference-of-number-of-distinct-values-on-diagonals/) (Medium)

-   Tags: array, hash table, matrix

## 1477. Find Two Non-overlapping Sub-arrays Each With Target Sum

-   [LeetCode](https://leetcode.com/problems/find-two-non-overlapping-sub-arrays-each-with-target-sum/) | [LeetCode CH](https://leetcode.cn/problems/find-two-non-overlapping-sub-arrays-each-with-target-sum/) (Medium)

-   Tags: array, hash table, binary search, dynamic programming, sliding window

## 2680. Maximum OR

-   [LeetCode](https://leetcode.com/problems/maximum-or/) | [LeetCode CH](https://leetcode.cn/problems/maximum-or/) (Medium)

-   Tags: array, greedy, bit manipulation, prefix sum

## 1671. Minimum Number of Removals to Make Mountain Array

-   [LeetCode](https://leetcode.com/problems/minimum-number-of-removals-to-make-mountain-array/) | [LeetCode CH](https://leetcode.cn/problems/minimum-number-of-removals-to-make-mountain-array/) (Hard)

-   Tags: array, binary search, dynamic programming, greedy

```python title="1671. Minimum Number of Removals to Make Mountain Array - Python Solution"
--8<-- "1671_minimum_number_of_removals_to_make_mountain_array.py"
```

## 1888. Minimum Number of Flips to Make the Binary String Alternating

-   [LeetCode](https://leetcode.com/problems/minimum-number-of-flips-to-make-the-binary-string-alternating/) | [LeetCode CH](https://leetcode.cn/problems/minimum-number-of-flips-to-make-the-binary-string-alternating/) (Medium)

-   Tags: string, dynamic programming, greedy, sliding window

## 238. Product of Array Except Self

-   [LeetCode](https://leetcode.com/problems/product-of-array-except-self/) | [LeetCode CH](https://leetcode.cn/problems/product-of-array-except-self/) (Medium)

-   Tags: array, prefix sum
-   Classic **Prefix Sum** problem
-   Return an array `output` such that `output[i]` is equal to the product of all the elements of `nums` except `nums[i]`.

| Approach           | Time | Space |
| ------------------ | ---- | ----- |
| Prefix             | O(n) | O(n)  |
| Prefix (Optimized) | O(n) | O(1)  |

```python title="238. Product of Array Except Self - Python Solution"
--8<-- "0238_product_of_array_except_self.py"
```

```cpp title="238. Product of Array Except Self - C++ Solution"
--8<-- "cpp/0238_product_of_array_except_self.cc"
```

## 2906. Construct Product Matrix

-   [LeetCode](https://leetcode.com/problems/construct-product-matrix/) | [LeetCode CH](https://leetcode.cn/problems/construct-product-matrix/) (Medium)

-   Tags: array, matrix, prefix sum

## 3334. Find the Maximum Factor Score of Array

-   [LeetCode](https://leetcode.com/problems/find-the-maximum-factor-score-of-array/) | [LeetCode CH](https://leetcode.cn/problems/find-the-maximum-factor-score-of-array/) (Medium)

-   Tags: array, math, number theory

## 2167. Minimum Time to Remove All Cars Containing Illegal Goods

-   [LeetCode](https://leetcode.com/problems/minimum-time-to-remove-all-cars-containing-illegal-goods/) | [LeetCode CH](https://leetcode.cn/problems/minimum-time-to-remove-all-cars-containing-illegal-goods/) (Hard)

-   Tags: string, dynamic programming

## 2484. Count Palindromic Subsequences

-   [LeetCode](https://leetcode.com/problems/count-palindromic-subsequences/) | [LeetCode CH](https://leetcode.cn/problems/count-palindromic-subsequences/) (Hard)

-   Tags: string, dynamic programming

## 2163. Minimum Difference in Sums After Removal of Elements

-   [LeetCode](https://leetcode.com/problems/minimum-difference-in-sums-after-removal-of-elements/) | [LeetCode CH](https://leetcode.cn/problems/minimum-difference-in-sums-after-removal-of-elements/) (Hard)

-   Tags: array, dynamic programming, heap priority queue

## 2565. Subsequence With the Minimum Score

-   [LeetCode](https://leetcode.com/problems/subsequence-with-the-minimum-score/) | [LeetCode CH](https://leetcode.cn/problems/subsequence-with-the-minimum-score/) (Hard)

-   Tags: two pointers, string, binary search

## 1995. Count Special Quadruplets

-   [LeetCode](https://leetcode.com/problems/count-special-quadruplets/) | [LeetCode CH](https://leetcode.cn/problems/count-special-quadruplets/) (Easy)

-   Tags: array, hash table, enumeration

## 2552. Count Increasing Quadruplets

-   [LeetCode](https://leetcode.com/problems/count-increasing-quadruplets/) | [LeetCode CH](https://leetcode.cn/problems/count-increasing-quadruplets/) (Hard)

-   Tags: array, dynamic programming, binary indexed tree, enumeration, prefix sum

```python title="2552. Count Increasing Quadruplets - Python Solution"
--8<-- "2552_count_increasing_quadruplets.py"
```

## 3302. Find the Lexicographically Smallest Valid Sequence

-   [LeetCode](https://leetcode.com/problems/find-the-lexicographically-smallest-valid-sequence/) | [LeetCode CH](https://leetcode.cn/problems/find-the-lexicographically-smallest-valid-sequence/) (Medium)

-   Tags: two pointers, string, dynamic programming, greedy

## 3404. Count Special Subsequences

-   [LeetCode](https://leetcode.com/problems/count-special-subsequences/) | [LeetCode CH](https://leetcode.cn/problems/count-special-subsequences/) (Medium)

-   Tags: array, hash table, math, enumeration

## 3303. Find the Occurrence of First Almost Equal Substring

-   [LeetCode](https://leetcode.com/problems/find-the-occurrence-of-first-almost-equal-substring/) | [LeetCode CH](https://leetcode.cn/problems/find-the-occurrence-of-first-almost-equal-substring/) (Hard)

-   Tags: string, string matching

## 3287. Find the Maximum Sequence Value of Array

-   [LeetCode](https://leetcode.com/problems/find-the-maximum-sequence-value-of-array/) | [LeetCode CH](https://leetcode.cn/problems/find-the-maximum-sequence-value-of-array/) (Hard)

-   Tags: array, dynamic programming, bit manipulation

## 3257. Maximum Value Sum by Placing Three Rooks II

-   [LeetCode](https://leetcode.com/problems/maximum-value-sum-by-placing-three-rooks-ii/) | [LeetCode CH](https://leetcode.cn/problems/maximum-value-sum-by-placing-three-rooks-ii/) (Hard)

-   Tags: array, dynamic programming, matrix, enumeration

## 3410. Maximize Subarray Sum After Removing All Occurrences of One Element

-   [LeetCode](https://leetcode.com/problems/maximize-subarray-sum-after-removing-all-occurrences-of-one-element/) | [LeetCode CH](https://leetcode.cn/problems/maximize-subarray-sum-after-removing-all-occurrences-of-one-element/) (Hard)

-   Tags: array, dynamic programming, segment tree

## 3003. Maximize the Number of Partitions After Operations

-   [LeetCode](https://leetcode.com/problems/maximize-the-number-of-partitions-after-operations/) | [LeetCode CH](https://leetcode.cn/problems/maximize-the-number-of-partitions-after-operations/) (Hard)

-   Tags: string, dynamic programming, bit manipulation, bitmask

## 487. Max Consecutive Ones II

-   [LeetCode](https://leetcode.com/problems/max-consecutive-ones-ii/) | [LeetCode CH](https://leetcode.cn/problems/max-consecutive-ones-ii/) (Medium)

-   Tags: array, dynamic programming, sliding window

## 1746. Maximum Subarray Sum After One Operation

-   [LeetCode](https://leetcode.com/problems/maximum-subarray-sum-after-one-operation/) | [LeetCode CH](https://leetcode.cn/problems/maximum-subarray-sum-after-one-operation/) (Medium)

-   Tags: array, dynamic programming
